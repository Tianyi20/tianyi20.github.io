---
title: 'My understanding of optimisation based planning & sampling based motion planning'
date: 2024/11/11
permalink: /posts/2024/11/blog-post-1/
tags:
  - optimisation based planning
  - sampling based motion planning
  - RRT; RRTstar
---

今天在聊天时候 突然发现自己对 sampling based motion planning 和 optimisation based planning 有误解。写一个帖子记录一下。

reference :

[https://slides.com/russtedrake/fall23-lec11#/19/0/2](https://slides.com/russtedrake/fall23-lec11#/19/0/2)

# 首先介绍 optimisation based planning

Firstly, it comes to how to minimize the distance within start position and end position. noting it is within configuration space (关节空间) . 

![picture](https://i-blog.csdnimg.cn/direct/1f06fbdd828d4f808cf7a824ae555ae1.png)
![image](https://github.com/user-attachments/assets/63af5a8f-d2b5-49e7-b957-3ce941dc8a40)

it comes to be a convex optimisation problem. 
因为我对 凸优化甚至不了解，先简单了解一下凸优化。

将路径规划问题表述为一个优化问题。这种方法通常用于找到从起点 $q_{\text{start}}$ 到终点 $ q_{\text{goal}}$ 的一条最优路径，同时避开障碍物。

### 优化目标

优化的目标是通过求解路径中相邻点之间的距离之和来最小化路径的平滑度，即：

$$
\min_{q_0, \ldots, q_N} \sum_{n=0}^{N-1} \| q_{n+1} - q_n \|_2^2
$$

在这里，目标函数 $$| q_{n+1} - q_n \|_2^2 $$ 表示相邻点之间的距离的平方和。这一项通过最小化路径上的位置变化，鼓励生成平滑的路径，使路径不会有过多的急剧转弯或突变。

这就是凸优化了
在表达式 \( \|Ax - b\|_2 \) 中， \( \|Ax - b\|_2 \) 表示的是向量 \( Ax - b \) 的二范数，即这个向量的长度（或称为欧几里得距离）。为了详细解释为什么它可以展开成多个项，我们可以一步步来看这个二范数的定义。

![picture](https://i-blog.csdnimg.cn/direct/878fa17e512d49459d8cf9bcc0096657.png)

### 二范数的定义

对于一个向量 \( y = (y_1, y_2, \ldots, y_n) \)，它的二范数 \( \|y\|_2 \) 定义为：

$$
\|y\|_2 = \sqrt{y_1^2 + y_2^2 + \cdots + y_n^2}
$$

换句话说，二范数是向量中各个分量平方的和的平方根。

### 应用到 \( \|Ax - b\|_2 \)

在最小二乘问题中，\( Ax - b \) 是一个向量，代表矩阵 \( A \) 作用于向量 \( x \) 后得到的结果与向量 \( b \) 之间的差异。

假设 \( Ax - b = y \)，其中 \( y \) 是一个 \( n \)-维向量，即 \( y = (y_1, y_2, \ldots, y_n) \)。那么 \( \|Ax - b\|_2 \) 就是 \( \|y\|_2 \)，可以展开为：

$$
\|Ax - b\|_2 = \sqrt{(y_1)^2 + (y_2)^2 + \cdots + (y_n)^2}
$$


# 但是optimisation based motion planning 的缺点是

非凸性导致局部最优解；prerequisite you need to know is: 优化规划（optimization-based planning）方法通常是数值解
如在之前的例子中，优化目标是平滑路径，同时满足碰撞回避的非凸约束。这些非凸约束（例如避开障碍物）使得整个优化问题成为非凸问题，而非凸优化问题的特点之一是可能存在多个**局部最优解。因此，优化算法往往只能找到某一个局部最优解，而非全局最优解。比如下图，有多个局部最优解。类似于我们做梯度下降，优化算法往往只能找到某一个局部最优解，而非全局最优解



因此，优化算法往往只能找到某一个局部最优解，而非全局最优解。比如下图，有多个局部最优解。类似于我们做梯度下降，优化算法往往只能找到某一个局部最优解，而非全局最优解



![picture](https://i-blog.csdnimg.cn/direct/13afaf9fa01f44b199206d0461cecf1f.png)

除此之外，在真实环境中使用 optimisation based planning往往需要给他一个初始路径、优化方法往往需要一个初始解，例如通过某种启发式算法（如 RRT 或 RRT*）生成的初始路径。在优化的过程中，算法会在这个初始解的基础上进行改进。由于非凸性，算法可能会收敛到离初始解较近的一个局部最优解。因此，初始路径的质量对最终解的优劣有很大影响。

# 关于RRTstar 和 optimisation based planning

RRTstar rewiring的定义，是 渐进最优，asymptotically optimal，优化是一个渐进过程。随着采样点数量的增加，这些方法可以逐渐靠近最优解，就是逐渐靠近optimisation based 最优解，而不能保证是全局最优解，也不能保证是局部最优解。
